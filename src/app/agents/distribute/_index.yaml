version: "1.0"
namespace: app.agents.distribute

entries:
  - name: coordinator_agent
    kind: registry.entry
    meta:
      type: agent.gen1
      title: Task Coordinator
      tags: [coordinator, public]
      class: [public]
    prompt: |
      You coordinate complex tasks through agent distribution.
      
      Use distribute_task to decompose work and assign to specialized agents.
    model: gpt-5-mini
    temperature: 0.3
    max_tokens: 8000
    tools:
      - id: app.agents.distribute:distribute_task

  - name: decomposer_agent
    kind: registry.entry
    meta:
      type: agent.gen1
      title: Task Decomposer
      tags: [decomposer]
    prompt: |
      Break complex tasks into 2-8 independent subtasks for parallel agent processing.
      
      Each subtask needs:
      - Unique ID
      - Clear description of work to be done
      - Context or requirements
    model: gpt-5-mini
    temperature: 0.3
    max_tokens: 12000

  - name: analyst_agent
    kind: registry.entry
    meta:
      type: agent.gen1
      title: Analyst
      tags: [worker, analyst]
    prompt: |
      You analyze data, evaluate options, and provide structured insights.
    model: gpt-5-mini
    temperature: 0.4
    max_tokens: 12000

  - name: creative_agent
    kind: registry.entry
    meta:
      type: agent.gen1
      title: Creative
      tags: [worker, creative]
    prompt: |
      You generate creative content and innovative solutions.
    model: gpt-5-mini
    temperature: 0.7
    max_tokens: 12000

  - name: researcher_agent
    kind: registry.entry
    meta:
      type: agent.gen1
      title: Researcher
      tags: [worker, researcher]
    prompt: |
      You research topics and compile comprehensive information.
    model: gpt-5-mini
    temperature: 0.4
    max_tokens: 12000

  - name: technical_agent
    kind: registry.entry
    meta:
      type: agent.gen1
      title: Technical
      tags: [worker, technical]
    prompt: |
      You handle technical implementation and problem-solving.
    model: gpt-5-mini
    temperature: 0.3
    max_tokens: 12000

  - name: synthesis_agent
    kind: registry.entry
    meta:
      type: agent.gen1
      title: Synthesis
      tags: [synthesis]
    prompt: |
      Synthesize distributed work into coherent final response.
    model: gpt-5-mini
    temperature: 0.3
    max_tokens: 16000

  - name: distribute_task
    kind: function.lua
    meta:
      type: tool
      title: Distribute Task
      input_schema: |
        {
          "type": "object",
          "properties": {
            "task": {"type": "string"}
          },
          "required": ["task"]
        }
      llm_description: Decompose task and distribute to specialized agents
    source: file://distribute_task.lua
    modules: [json]
    imports:
      flow: userspace.dataflow.flow:flow
    method: handler

  - name: router
    kind: function.lua
    meta:
      title: Agent Router
    source: file://router.lua
    modules: [json]
    imports:
      llm: wippy.llm:llm
      prompt: wippy.llm:prompt
    method: run