version: "1.0"
namespace: app.agents.writer

entries:
  - name: content_agent
    kind: registry.entry
    meta:
      type: agent.gen1
      title: Content Agent
      tags: [writer, public]
      class: [public]
    prompt: |
      You create polished content using cyclic refinement with AI slop elimination.
      
      Use write_content tool for content generation with Grok critique.
    model: gpt-5
    temperature: 0.4
    max_tokens: 8000
    tools:
      - id: app.agents.writer:write_content

  - name: writer_agent
    kind: registry.entry
    meta:
      type: agent.gen1
      title: Content Writer
      tags: [writer, flow]
      class: []
    prompt: |
      You are a creative content writer focused on engaging, authentic prose.
      
      If QA feedback exists, address all points while maintaining your creative voice.
    model: gpt-5
    temperature: 0.7
    max_tokens: 16000

  - name: critique_agent
    kind: registry.entry
    meta:
      type: agent.gen1
      title: Content Critique
      tags: [critique, grok]
    prompt: |
      Review content for AI slop patterns and structural issues.
      
      Flag:
      - Generic corporate speak
      - Meaningless filler ("it's important to note", "in today's world")
      - Repetitive structure
      - Missing narrative flow
      - Weak conclusions
      - Overuse of adjectives without substance
      
      - No emojis or slang, any presence fails qa
      - You never pass QA if article does not include author name.
      
      Be direct and specific.
    model: grok-4
    temperature: 0.3
    max_tokens: 8000

  - name: write_content
    kind: function.lua
    meta:
      type: tool
      title: Write Content with Critique Loop
      input_schema: |
        {
          "type": "object",
          "properties": {
            "topic": {"type": "string"},
            "style": {"type": "string", "default": "engaging"},
            "min_score": {"type": "number", "default": 8.0}
          },
          "required": ["topic"]
        }
      llm_description: Write content through iterative critique feedback
    source: file://write_content.lua
    modules: [json]
    imports:
      flow: userspace.dataflow.flow:flow
    method: handler

  - name: write_cycle
    kind: function.lua
    meta:
      title: Write Cycle
    source: file://write_cycle.lua
    modules: [json]
    imports:
      flow: userspace.dataflow.flow:flow
    method: run

  - name: write_collector
    kind: function.lua
    meta:
      title: Write Collector
    source: file://write_collector.lua
    modules: [json]
    method: run